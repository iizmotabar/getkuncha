{"id":350,"date":"2017-09-22T10:53:30","date_gmt":"2017-09-22T05:53:30","guid":{"rendered":"http:\/\/18.139.242.7\/2017\/09\/22\/regular-expressions-google-analytics\/"},"modified":"2022-08-02T10:13:45","modified_gmt":"2022-08-02T10:13:45","slug":"regular-expressions-google-analytics","status":"publish","type":"post","link":"https:\/\/marketlytics.com\/blog\/regular-expressions-google-analytics\/","title":{"rendered":"How to Use Regular Expressions in Google Analytics like a Pro"},"content":{"rendered":"<p>Regular expressions are widely used in different spheres helping to solve some complex questions related to data analysis. If you are using Google Analytics, you know how much data it can give you, and you need something that will help you to deal with it. Regular expressions, or RegEx, are a good match here. In the article, I\u2019ll explain how to use them to create pro reports and filters.<\/p>\n<h2><strong>Some theory<\/strong><\/h2>\n<p>Before creating and using regular expressions, you should speak their language. So here are some most important \u201cwords\u201d that will help you to bridge that gap.<\/p>\n<p>. \u2013 this symbol matches any single character. Therefore, two such signs match two symbols, etc.<\/p>\n<p>hou.e \u2013&gt; house, hou7e,<br \/>\nhou)e; ho..e \u2013 house, ho5re, ho%be<\/p>\n<p>* \u2013 equals 0 or more of the previous characters.<\/p>\n<p>magent* &#8211; &nbsp;magentn, magent, magenta, magentm<\/p>\n<p>| &#8211; the tube is used to separate parts of the regular expression from each other<\/p>\n<p>hou.e| magent* &#8211; house, magento<\/p>\n<p>^ &#8211; requires the matching data be at the beginning of the field<\/p>\n<p>^color \u2013 matches color21, colorkjir, color-23-67, etc. but does NOT match anything like 9color, ycolor, icolor, etc.<\/p>\n<p>$ &#8211; limits data search at the end of the field<\/p>\n<p>htm$ &#8211; matches any-url.htm but NOT any-url.html<\/p>\n<p>() \u2013 contains variations of matching items. It is usually combined with the tube.<\/p>\n<p>dear (Mr|Mrs|Ms|Miss) Smith \u2013 matches dear Mr Smith, dear Mrs Smith, dear Ms Smith, dear Miss Smith.<\/p>\n<p>Parenthesis are also usually combined with the asterisk * and dot . to create this part (.*) which is treated as \u201cabsolutely everything\u201d:<\/p>\n<p>\/map\/country\/(.*) &#8211; \/map\/country\/usa, \/map\/country\/usa15, \/map\/country\/belarus\/, \/map\/country\/uk\/<\/p>\n<p>\\ \u2013 transforms any special RegEx character into a simple symbol<\/p>\n<p>my-url-(promo|campaign|ref)\\.html \u2013 matches my-url-promo.html, my-url- campaign.html, my-url-ref.html<\/p>\n<p>Now when the theory is over, let\u2019s come and play with Google Analytics filters.<\/p>\n<h2><strong>RegEx for Google Analytics filters<\/strong><\/h2>\n<p>The main reason to use regular expressions in Google Analytics is to filter out the data you need to explore. For example, you have 5000+ URLs and need stats for just 250 of them. If you try to get the stats for these URLs one by one, you\u2019ll get bored soon and have to spend lots (I really mean LOTS here) of time. Instead, you can use regular expression to get the stats in a few clicks.<\/p>\n<p>When it comes to Google Analytics filters, you can create them in the existing reports:<\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/GA-regex-reporting.png\" alt=\" use regex in reporting \"><\/p>\n<p>or in custom reports that are created by you:<\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/GA-regex-custom-reports.png\" alt=\" regex custom reports \"><\/p>\n<p>The logic behind building a regular expression is to make a list of the needed URLs and find common parts in them. Here are some examples.<\/p>\n<h3><strong>URLs in one category<\/strong><\/h3>\n<p><strong>Example 1:<\/strong><\/p>\n<p>You need all URLs in a single category:<\/p>\n<p>site.com\/magento-extensions\/color-swatch<\/p>\n<p>site.com\/magento-extensions\/search<\/p>\n<p>site.com\/magento-extensions\/rma<\/p>\n<p>site.com\/magento-extensions\/ajax-cart<\/p>\n<p>site.com\/magento-extensions\/navigation<\/p>\n<p><strong>But not these:<\/strong><\/p>\n<p>site.com\/promo\/magento-extensions\/ajax-cart<\/p>\n<p>site.com\/promo\/magento-extensions\/navigation<\/p>\n<p>In these examples you see that \/magento-extensions\/ is the common part, so you should use it to create your RegEx:<\/p>\n<p>^\/magento-extensions\/(.*)<\/p>\n<p>^ &#8211; excludes any URLs containing anything except for the needed category after host, i.e. \u201csite.com\u201d in this example.<\/p>\n<p><strong>Example 2:<\/strong><\/p>\n<p>You need particular URLs within one category:<\/p>\n<p>site.com\/courses\/acca\/part-time.html<\/p>\n<p>site.com\/courses\/acca\/full-time.html<\/p>\n<p>site.com\/courses\/acca\/online.html<\/p>\n<p><strong>But not these:<\/strong><\/p>\n<p>site.com\/courses\/acca\/part-time-promo.html<\/p>\n<p>site.com\/courses\/acca\/full-time-promo.html<\/p>\n<p>site.com\/courses\/acca\/online-promo.html<\/p>\n<p>You can use the following regular expression:<\/p>\n<p>\/acca\/(part-time|full-time|online)\\.html<\/p>\n<h3><strong>URLs from different categories<\/strong><\/h3>\n<p><strong>Example 1:<\/strong><\/p>\n<p>Here are some other examples. If you need to include these URLs:<\/p>\n<p>site.com\/gifts-for-her\/mugs<\/p>\n<p>site.com\/gifts-for-him\/mugs<\/p>\n<p>site.com\/gifts-for-her\/caps<\/p>\n<p>site.com\/gifts-for-him\/caps<\/p>\n<p>Here is what you should use:<\/p>\n<p>\/gifts-for-her\/(mugs|caps)|\/gifts-for-him\/\/(mugs|caps)<\/p>\n<p><strong>Example 2:<\/strong><\/p>\n<p>To get info on these URLs:<\/p>\n<p>site.com\/promotions\/promo-banners.htm<\/p>\n<p>site.com\/navigation\/internal-links.htm<\/p>\n<p>site.com\/customers\/segmentation.htm<\/p>\n<p>site.com\/sales\/checkout.htm<\/p>\n<p>you can use this:<\/p>\n<p>\/promotions\/promo-banners\\.htm|\/navigation\/internal-links\\.htm|\/customers\/segmentation\\.htm|\/sales\/checkout\\.htm<\/p>\n<h2><strong>Excluding parameters from Google Analytics reports<\/strong><\/h2>\n<p>You will find numerous URLs with parameters like ?, =, etc. They can be generated automatically by your store navigation or just can occur and you can\u2019t control it. To exclude such params from your reports you can use this regular expression:<\/p>\n<p>\\?|=<\/p>\n<p>Note that both inclusion and exclusion filters can be used in one report which is quite handy.<\/p>\n<h2><strong>IP addresses exclusion<\/strong><\/h2>\n<p>When a team works on a site, each member open the pages many times a day. This will result in inaccurate data in Google Analytics. The thing is you need to see actions of real users and customers but not team members. You can <a href=\"https:\/\/marketlytics.com\/analytics-faq\/exclude-multiple-ips-google-analytics\">exclude internal traffic<\/a> with an IP exclusion filter on a view level.<\/p>\n<p>Make a list of all the internal IPs and create a regular expression from them. For example:<\/p>\n<p>125.10.156.19<\/p>\n<p>125.10.158.19<\/p>\n<p>345.21.67.890<\/p>\n<p>Here is what you can use:<\/p>\n<p>125\\.10\\.(156|158)\\.19|345\\.21\\.67\\.890<\/p>\n<p>Ranges can also be used here but I prefer using more simple but understandable structure. It\u2019s also easy to add or delete any IP address from the list if you need to.<\/p>\n<p>You can add your IP filter in <strong>Admin &gt; Filters &gt; New Filter &gt; Custom<\/strong><\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/GA-regex-ip-filter.png\" alt=\" exclude multiple ips \"><\/p>\n<h2><strong>Important things to remember <\/strong><\/h2>\n<ul>\n<li>You should know that view-level filters like IP exclusion (those that change the way your data is collected) cannot be undone: if you\u2019ve mistakenly excluded to many IPs and lost Analytics data for this exclusion period, you won\u2019t get it back by removing the exclusion filter. That\u2019s why you should always have a test GA view to apply different filters here.<\/li>\n<li>Search filters in reports are safe: you can use them in any Google Analytics view. You can also create and save custom reports with them.<\/li>\n<li>Your regular expressions should not contain any blanks as any part after a blank is ignored.<\/li>\n<li>If you need to create a super big regular expression, create it part by part. You can test each part to make sure it works and then combine them using the tube |. This way you won\u2019t need to review huge regular expression in case something goes wrong with it.<\/li>\n<li>Testing is always the answer. This will help you in creating a particular RegEx for your site.<\/li>\n<\/ul>\n<div class=\"poptin-embedded\" data-id=\"82948c996a175\"><\/div>\n","protected":false},"excerpt":{"rendered":"<p>Learn how to use regular expressions in Google Analytics filters, custom reports and other reports. Your definitive guide to google analytics regex.&nbsp;<\/p>\n","protected":false},"author":5,"featured_media":10497,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"content-type":"","footnotes":""},"categories":[3],"tags":[61,85],"acf":[],"aioseo_notices":[],"_links":{"self":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts\/350"}],"collection":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/users\/5"}],"replies":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/comments?post=350"}],"version-history":[{"count":0,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts\/350\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/media\/10497"}],"wp:attachment":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/media?parent=350"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/categories?post=350"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/tags?post=350"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}