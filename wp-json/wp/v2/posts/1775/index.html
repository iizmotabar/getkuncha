{"id":1775,"date":"2017-05-04T08:35:37","date_gmt":"2017-05-04T03:35:37","guid":{"rendered":"http:\/\/18.139.242.7\/uncategorized\/integrate-criteo-onetag-via-google-tag-manager\/"},"modified":"2022-10-24T22:24:40","modified_gmt":"2022-10-24T22:24:40","slug":"integrate-criteo-onetag-via-google-tag-manager","status":"publish","type":"post","link":"https:\/\/marketlytics.com\/analytics-faq\/integrate-criteo-onetag-via-google-tag-manager\/","title":{"rendered":"Integrate Criteo OneTag Via Google Tag Manager Template"},"content":{"rendered":"\n<p>Sometimes it is difficult to integrate multiple marketing tags on your website, especially when you have to depend on a developer to modify website codes. Google Tag Manager can be your beloved tool when dealing with marketing and analytics tags. In this guide, you will learn how to install your Criteo OneTag via Google Tag Manager built-in template.<\/p>\n\n\n\n<h2 class=\"wp-block-heading\"><strong>Step 1: Create the Data Layer<\/strong><\/h2>\n\n\n\n<p>The Data layer is a javascript code snippet which is used to store and send information to Google Tag Manager. This code snippet is placed directly on your website just before the GTM container snippet.<\/p>\n\n\n\n<p>While implementing Criteo Onetag, first you have to decide on which pages you want to add this tag. For example, if you want to add Criteo OneTag on your homepage, then you would have to add the data layer code on the home page too. This content in the data layer will specify what information will be sent to Criteo through this tag.<\/p>\n\n\n\n<p>The data layer code is enclosed between the script tags (&lt;script&gt;&lt;\/script&gt;) and is placed in the head section of your webpage. Below is how the data layer code should look like on your page.<\/p>\n\n\n\n<figure class=\"wp-block-image\"><img decoding=\"async\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/191_image-asset.png\" alt=\" adding the data layer code \"\/><\/figure>\n\n\n\n<p>Below is an example of the data layer code to be placed on your homepage. The PageType parameter tells GTM the type of page a user is viewing and hence fire the trigger accordingly.<\/p>\n\n\n\n<pre class=\"wp-block-preformatted\"><span class=\"cm-tag cm-bracket\">&lt;<\/span><span class=\"cm-tag\">script<\/span><span class=\"cm-tag cm-bracket\">&gt;<\/span>\n\n<span class=\"cm-variable\">dataLayer<\/span> <span class=\"cm-operator\">=<\/span> <span class=\"cm-variable\">dataLayer<\/span> <span class=\"cm-operator\">||<\/span> [ ];\n<span class=\"cm-variable\">dataLayer<\/span>.<span class=\"cm-property\">push<\/span> ({\n<span class=\"cm-property\">\u2018PageType\u2019<\/span> : <span class=\"cm-variable\">\u2018HomePage\u2019<\/span>,\n<span class=\"cm-property\">\u2018Email\u2019<\/span> : <span class=\"cm-variable\">\u2018email<\/span> <span class=\"cm-variable\">address<\/span> <span class=\"cm-variable\">of<\/span> <span class=\"cm-variable\">the<\/span> <span class=\"cm-variable\">user\u2019<\/span>\n});\n\n<span class=\"cm-tag cm-bracket\">&lt;\/<\/span><span class=\"cm-tag\">script<\/span><span class=\"cm-tag cm-bracket\">&gt;<\/span><\/pre>\n\n\n\n<p>This is just an example code, your setup might be different and complex. If you are not good with codes, ask a developer to implement data layer on your website.<\/p>\n\n\n\n<h2 class=\"wp-block-heading\"><strong>Step 2: Choose the Variable<\/strong><\/h2>\n\n\n\n<p>Now you have to create a variable that will retrieve information from the data layer. Once you create the variables, the information contained in the data layer we created in the first step will be automatically fed into Criteo OneTag.<\/p>\n\n\n\n<p>To create the variable in GTM, click on the Variables tab under the current workflow.<\/p>\n\n\n\n<p>Here you will need to create a User-Defined variable.<\/p>\n\n\n\n<figure class=\"wp-block-image\"><img decoding=\"async\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/192_image-asset.png\" alt=\" create user-defined variable \"\/><\/figure>\n\n\n\n<figure class=\"wp-block-image size-large\"><a href=\"https:\/\/marketlytics.com\/contact-us\/\" target=\"_blank\" rel=\"noreferrer noopener\"><img decoding=\"async\" width=\"1024\" height=\"384\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2022\/10\/Google-Tag-Manager-Expert-2-1024x384.png\" alt=\"\" class=\"wp-image-10791\" srcset=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2022\/10\/Google-Tag-Manager-Expert-2-1024x384.png 1024w, https:\/\/marketlytics.com\/wp-content\/uploads\/2022\/10\/Google-Tag-Manager-Expert-2-300x113.png 300w, https:\/\/marketlytics.com\/wp-content\/uploads\/2022\/10\/Google-Tag-Manager-Expert-2-768x288.png 768w, https:\/\/marketlytics.com\/wp-content\/uploads\/2022\/10\/Google-Tag-Manager-Expert-2-1536x576.png 1536w, https:\/\/marketlytics.com\/wp-content\/uploads\/2022\/10\/Google-Tag-Manager-Expert-2-2048x768.png 2048w\" sizes=\"(max-width: 1024px) 100vw, 1024px\" \/><\/a><\/figure>\n\n\n\n<p>We will create the Criteo OneTag partner ID and site type variables here<\/p>\n\n\n\n<p>To create the Partner ID variable, name the variable as <strong>Criteo PartnerID<\/strong>, select the variable type as <strong>constant<\/strong> and enter your <strong>Criteo partner ID<\/strong> into the value field.<\/p>\n\n\n\n<figure class=\"wp-block-image\"><img decoding=\"async\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/193_image-asset.png\" alt=\" criteo partnerid variable \"\/><\/figure>\n\n\n\n<p>Next, we will create the site type variable. Again create a new user-defined variable.<\/p>\n\n\n\n<p>Enter the name as Site Type, select the variable type as Custom JavaScript and enter the below line of code into the code field to identify the site type.<\/p>\n\n\n\n<pre class=\"wp-block-preformatted\">function(){\n    var deviceType= \/iPad\/.test(navigator.userAgent)?\"t\":\/Mobile|iP(hone|od)|Android|BlackBerry|IEMobile|Silk\/.test(navigator.userAgent)?\"m\":\"d\";\n\nreturn deviceType\n}<\/pre>\n\n\n\n<p>You can write your own JavaScript code to get the site type value.<\/p>\n\n\n\n<figure class=\"wp-block-image\"><img decoding=\"async\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/194_image-asset.png\" alt=\" criteo site type variable \"\/><\/figure>\n\n\n\n<p>If you have other things to capture you can create other variables like CriteoProductID or CriteoProductIDList.<\/p>\n\n\n\n<h2 class=\"wp-block-heading\"><strong>Step 3: Setup the Trigger<\/strong><\/h2>\n\n\n\n<p>Now you will have to specify when the Criteo OneTag should be fired on your website.<\/p>\n\n\n\n<p>Click on the triggers tab under the current workspace.<\/p>\n\n\n\n<p>Click on the new button to create the trigger.<\/p>\n\n\n\n<p>Name the trigger as <strong>Criteo &#8211; Home<\/strong><\/p>\n\n\n\n<p>Select the trigger type as <strong>DOM Ready<\/strong><\/p>\n\n\n\n<p>Choose the trigger to fire on <strong>Some DOM Ready Events<\/strong><br>Set the trigger to fire when <strong>Site Type equals home<\/strong>.<\/p>\n\n\n\n<figure class=\"wp-block-image\"><img decoding=\"async\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/195_image-asset.png\" alt=\" criteo home trigger \"\/><\/figure>\n\n\n\n<h2 class=\"wp-block-heading\"><strong>Step 4: Create the Tag<\/strong><\/h2>\n\n\n\n<p>Now it\u2019s time to create the Criteo OneTag via Google Tag Manager template.<\/p>\n\n\n\n<p>Click on the Tags button under the current workspace and create a new tag<\/p>\n\n\n\n<p>Enter the name as <strong>Criteo &#8211; Home<\/strong><\/p>\n\n\n\n<p>Select the tag type as <strong>Criteo OneTag<\/strong><\/p>\n\n\n\n<p>In the <strong>Criteo Account ID<\/strong> field select the <strong>{{Criteo PartnerID}}<\/strong> variable we created before.<\/p>\n\n\n\n<p>In the Site Type field select the <strong>{{Site Type}}<\/strong> variable from the drop down.<\/p>\n\n\n\n<p>Leave the hashed email field empty<br>Select the Page Type as <strong>Home Page<\/strong><\/p>\n\n\n\n<p>Next, select the trigger type as <strong>Criteo &#8211; Home<\/strong> we created in the previous step.<\/p>\n\n\n\n<figure class=\"wp-block-image\"><img decoding=\"async\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/196_image-asset.png\" alt=\" Criteo OneTag overview \"\/><\/figure>\n\n\n\n<p>Read Also: <a href=\"https:\/\/marketlytics.com\/analytics-faq\/install-linkedin-insight-tag-via-google-tag-manager\">How to Install LinkedIn Insight Tag via Google Tag Manager Template<\/a><\/p>\n\n\n\n<h2 class=\"wp-block-heading\"><strong>Step 5: Preview &amp; Publish<\/strong><\/h2>\n\n\n\n<p>Click on the preview button to test and preview this tag before setting it live. If the tag successfully fired publish the new changes to the workflow.<\/p>\n\n\n\n<div class=\"poptin-embedded\" data-id=\"524d62d316aa4\">&nbsp;<\/div>\n","protected":false},"excerpt":{"rendered":"<p>A step by step guide to installing Criteo OneTag via google tag manager built-in template. Follow the steps mentioned in this guide. &nbsp;<\/p>\n","protected":false},"author":5,"featured_media":10504,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"content-type":"","footnotes":""},"categories":[2],"tags":[66],"acf":[],"aioseo_notices":[],"_links":{"self":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts\/1775"}],"collection":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/users\/5"}],"replies":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/comments?post=1775"}],"version-history":[{"count":0,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts\/1775\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/media\/10504"}],"wp:attachment":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/media?parent=1775"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/categories?post=1775"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/tags?post=1775"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}