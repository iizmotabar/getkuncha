{"id":389,"date":"2017-11-27T15:56:54","date_gmt":"2017-11-27T10:56:54","guid":{"rendered":"http:\/\/18.139.242.7\/2017\/11\/27\/element-visibility-trigger-google-tag-manager\/"},"modified":"2022-08-02T10:25:01","modified_gmt":"2022-08-02T10:25:01","slug":"element-visibility-trigger-google-tag-manager","status":"publish","type":"post","link":"https:\/\/marketlytics.com\/blog\/element-visibility-trigger-google-tag-manager\/","title":{"rendered":"3 Things Element Visibility Trigger Made Simple in GTM"},"content":{"rendered":"<p>The element visibility trigger in Google Tag Manager made a lot of things easier to implement. Before it was quite difficult to detect when an element appeared on the page. For example, tracking pop up window using GTM wasn\u2019t so easy.<\/p>\n<p>With the new element visibility trigger, we can now easily track banner impressions, pop-ups and especially form submissions that display a message upon submission. In this article, I will show you how you can take the most benefit from this trigger.<\/p>\n<h2><strong>Form Submission Tracking without thank you page<\/strong><\/h2>\n<p>You may already know multiple ways of form submission tracking, but also there are multiple types of forms. Those with a proper thank you page are easy to track with form submission trigger.<\/p>\n<p>But the difficulty comes with the forms without a thank you page. These forms usually display a message when the form is submitted.<\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/thank-you.png\" alt=\" thank you message \"><\/p>\n<p>For tracking these kind of forms, we used to create a custom JS variable, that returns true when all the form fields were filled. You can read that method <a href=\"https:\/\/marketlytics.com\/blog\/form-submission-tracking-google-tag-manager\">here<\/a>.<\/p>\n<p>Now, we have the element visibility trigger and we can use to track a form submission when the above message box is displayed. To do this, we will need to have the element ID or class.<\/p>\n<p>Let\u2019s follow the instructions below to track form submissions without thank you pages.<\/p>\n<h3><strong>1. Create a new element visibility trigger<\/strong><\/h3>\n<p>To create a new element visibility trigger you need to follow the following steps:<\/p>\n<ul>\n<li>Navigate to triggers section in GTM<\/li>\n<li>Click the new button to create a trigger<\/li>\n<li>Select the trigger type as element visibility<\/li>\n<\/ul>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/create-a-new-trigger.png\" alt=\" create a new trigger \"><\/p>\n<ul>\n<li>Open your website contact form, fill out and submit<\/li>\n<li>When the thank you message appears, right click and inspect element<\/li>\n<li>Look for the id or class of the div of the thank you message element<\/li>\n<li>If there is an id associated with div, copy it otherwise copy the class name<\/li>\n<\/ul>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/element-id.png\" alt=\" inspect element \"><\/p>\n<ul>\n<li>Now go back to the element visibility trigger you created before<\/li>\n<li>Paste the id into the element id field<\/li>\n<li>Fill out the trigger as displayed in the image below<\/li>\n<\/ul>\n<p><img decoding=\"async\" class=\"alignnone\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/configure-trigger.png\" alt=\" configure trigger \"><\/p>\n<p>If the element does not have an ID you will have to select CSS selector from the selection method drop-down. Enter the class name in the element selector field i.e div.form-confirmation.<\/p>\n<p>Enter a name for the trigger and save it. We will now test if the trigger loads when the element is visible. Open preview mode and submit a form on your website.<\/p>\n<p>When the thank you message appears, the visibility trigger will load.<\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/trigger-preview.png\" alt=\" gtm debug mode \"><\/p>\n<p><strong>Once the trigger loads successfully, you can then create a new universal analytics event <\/strong><strong>tag and send form submission data to analytics. <\/strong><\/p>\n<h3><strong>2. Banner Ad Impression Tracking<\/strong><\/h3>\n<p>Another very important thing that element visibility trigger made simpler is banner ad impression tracking. Previously, we used to track banner impressions via JavaScript custom variable. It was a little tricky and one has to write a JS code. You can check our previous method <a href=\"https:\/\/marketlytics.com\/blog\/tracking-banner-impressions-using-google-tag-manager-and-universal-analytics\">here<\/a>.<\/p>\n<p>Let\u2019s see how can we track banner impressions via element visibility trigger in GTM. I will talk about tracking both single and multiple banners.<\/p>\n<h3><strong>Tracking a single banner<\/strong><\/h3>\n<p>For example, we want to track a banner that is located in the footer of our website. To track the banner impressions, we will have to look for the id or class of the div that contains the banner. To do so, right click on the banner and click inspect.<\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/1_inspect-element.png\" alt=\" inspect element \"><\/p>\n<p>Copy the class name or id of the parent div of the banner.<\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/banner-class.png\" alt=\" copy element class \"><\/p>\n<p>Copy the class name and navigate to your Google Tag Manager account. Go to triggers and create a new trigger of type element visibility.<\/p>\n<p>Fill the trigger configurations as displayed in the image below:<\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/track-single-banner-impression.png\" alt=\" configure trigger \"><\/p>\n<p>Enter a name for the trigger and save it. Now create a universal analytics event type tag to send the impressions data to Google Analytics.<\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/banner-impressions-dtag.png\" alt=\" create a new tag \"><\/p>\n<p>Set this tag to fire on the trigger we created above. Open preview mode and open the page containing the banner in a new tab. If you have followed the previous steps successfully, you will see the banner impression tag and element visibility trigger firing on the debug mode.<\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/preview-mode.png\" alt=\" open preview mode \"><\/p>\n<p>Now, we have tracked a single banner very easily. What if you have multiple banners on your website? Will you create separate tags and triggers for each banner? Obviously not!!<\/p>\n<p><strong>Tracking Multiple Banner Impressions:<\/strong><\/p>\n<p>For tracking multiple banners, we will use our old method of tracking multiple banners.<\/p>\n<p>Let\u2019s say your banners code is something like below:<\/p>\n<pre class=\"source-code\"><span class=\"cm-tag cm-bracket\">&lt;<\/span><span class=\"cm-tag\">div<\/span> <span class=\"cm-attribute\">id<\/span>=<span class=\"cm-string\">\"sponsored-content\"<\/span> <span class=\"cm-attribute\">data-sp-content<\/span>=<span class=\"cm-string\">\"paypal\"<\/span> <span class=\"cm-attribute\">data-sp-location<\/span>=<span class=\"cm-string\">\"sidebar\"<\/span><span class=\"cm-tag cm-bracket\">&gt;<\/span>\n    <span class=\"cm-tag cm-bracket\">&lt;<\/span><span class=\"cm-tag\">h1<\/span><span class=\"cm-tag cm-bracket\">&gt;<\/span>Never Miss a Transaction!<span class=\"cm-tag cm-bracket\">&lt;\/<\/span><span class=\"cm-tag\">h1<\/span><span class=\"cm-tag cm-bracket\">&gt;<\/span>\n    <span class=\"cm-tag cm-bracket\">&lt;<\/span><span class=\"cm-tag\">p<\/span><span class=\"cm-tag cm-bracket\">&gt;<\/span> 100% accuracy of paypal transactions in google analytics\n    <span class=\"cm-tag cm-bracket\">&lt;<\/span><span class=\"cm-tag\">a<\/span> <span class=\"cm-attribute\">href<\/span>=<span class=\"cm-string\">\"https:\/\/marketlytics.com\/always-measuring\/\"<\/span><span class=\"cm-tag cm-bracket\">&gt;<\/span>Beta Signups Open<span class=\"cm-tag cm-bracket\">&lt;\/<\/span><span class=\"cm-tag\">a<\/span><span class=\"cm-tag cm-bracket\">&gt;<\/span>\n    <span class=\"cm-tag cm-bracket\">&lt;\/<\/span><span class=\"cm-tag\">p<\/span><span class=\"cm-tag cm-bracket\">&gt;<\/span>\n<span class=\"cm-tag cm-bracket\">&lt;\/<\/span><span class=\"cm-tag\">div<\/span><span class=\"cm-tag cm-bracket\">&gt;<\/span><\/pre>\n<p>In the above script, data-sp-content and data-sp-location are important. These are used to track the banner name and location. Whenever you have multiple banners, you will<\/p>\n<p>have to keep the div id similar for all banners and change the data-sp-content and data-sp-location.<\/p>\n<p>For tracking all the banners, you will use the similar method we used to track single banner above. You will have to use the selection method as id in the element visibility trigger.<\/p>\n<p>For tracking multiple banners, all you have to do is to create two custom JS variables that will track the banner name and location.<\/p>\n<p>Let\u2019s create the two variables. Navigate to variables and create a new user-defined custom JS variable and name it \u2018detect sponsored name\u2019.<\/p>\n<p>Paste the below code in the JS field and save the variable.<\/p>\n<pre class=\"source-code\">function(){\n    var contentId = document.getElementById(\"sponsored-content\"); \/\/ id of our sponsored block\n    var contentName = contentId.getAttribute(\"data-sp-content\"); \/\/custom attribute name\n \n    return contentName;\n}<\/pre>\n<p>If your banner has a class instead of id, use the below code:<\/p>\n<pre class=\"source-code\">function(){\n    var contentClass = document.getElementByClass(\"sponsored-content\"); \/\/ id of our sponsored block\n    var contentName = contentClass.getAttribute(\"data-sp-content\"); \/\/custom attribute name\n \n    return contentName;\n}<\/pre>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/detect-sponsored-name.png\" alt=\" create gtm custom variable \"><\/p>\n<p>Save the variable.<\/p>\n<p>Now, create the next user-defined custom js variable and name it \u2018detect sponsored location\u2019. Enter the below code in the js field:<\/p>\n<pre class=\"source-code\">function(){\n    var contentId = document.getElementById(\"sponsored-content\"); \/\/ id of our sponsored block\n    var contentLocation = contentId.getAttribute(\"data-sp-location\"); \/\/custom attribute name\n \n    return contentLocation;\n}<\/pre>\n<p>Similarly, change the id to class if your div uses a class.<\/p>\n<p>Whenever, a banner impression is tracked these two variables will save the banner name and location of the banner.<\/p>\n<p>The final step is to send the banner name and location to google analytics. There is no much hard work. All you have to do now is to open the universal analytics tag we created for single banner impression above. And add event action as \u2018detect sponsored name\u2019 and label as \u2018detect sponsored location\u2019.<\/p>\n<p><img decoding=\"async\" class=\"aligncenter\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/multiple-banner-tracking-tag.png\" alt=\" create tag for banner impressions event \"><\/p>\n<p>Save the tag and open preview mode for testing and finally publish changes in GTM container.<\/p>\n<h2><strong>3. Pop up tracking<\/strong><\/h2>\n<p>Until now, you have understood the element visibility trigger very well. You can now track any element using this trigger.<\/p>\n<p>For tracking any pop-up element, all you need to have is the id or class of the div. Using this you can track all your pop up forms, form field errors and modals.<\/p>\n<p>Did you found this article helpful? Feel free to brag about your success in the comments below.<\/p>\n<h3><strong>Related Posts:<\/strong><\/h3>\n<p><a href=\"https:\/\/marketlytics.com\/blog\/google-tag-manager-events-complete-guide\">How to Use Google Tag Manager for Event Tracking<\/a><\/p>\n<p><a href=\"https:\/\/marketlytics.com\/blog\/google-tag-manager-adwords-conversion-tracking\">Google Tag Manager Adwords Conversion Tracking<\/a><\/p>\n<p><a href=\"https:\/\/marketlytics.com\/blog\/google-tag-manager-adwords-conversion-tracking\">Installing Google Optimize via Google Tag Manager<\/a><\/p>\n<div class=\"poptin-embedded\" data-id=\"524d62d316aa4\"><\/div>\n","protected":false},"excerpt":{"rendered":"<p>Learn how element visibility trigger in Google Tag Manager is used for form submissions without thank you pages, banner ad impressions tracking and any pop up that appears on your website.&nbsp;<\/p>\n","protected":false},"author":5,"featured_media":10510,"comment_status":"open","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"content-type":"","footnotes":""},"categories":[3],"tags":[66],"acf":[],"aioseo_notices":[],"_links":{"self":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts\/389"}],"collection":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/users\/5"}],"replies":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/comments?post=389"}],"version-history":[{"count":0,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts\/389\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/media\/10510"}],"wp:attachment":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/media?parent=389"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/categories?post=389"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/tags?post=389"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}