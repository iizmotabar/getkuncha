{"id":1691,"date":"2016-09-08T07:47:42","date_gmt":"2016-09-08T02:47:42","guid":{"rendered":"http:\/\/18.139.242.7\/uncategorized\/remove-query-string-google-tag-manager\/"},"modified":"2016-09-08T07:47:42","modified_gmt":"2016-09-08T02:47:42","slug":"remove-query-string-google-tag-manager","status":"publish","type":"post","link":"https:\/\/marketlytics.com\/analytics-faq\/remove-query-string-google-tag-manager\/","title":{"rendered":"How to remove query string using Google Tag Manager?"},"content":{"rendered":"<p><span style=\"font-size:16px\">Query strings are parameters attached to the actual url to get more information. Query string can be the search terms by the the user or the utm parameters to know the performance of a specific page. <\/span><strong>&nbsp;<\/strong><\/p>\n<p><span style=\"font-size:16px\">In order to remove query string using GTM following steps are required<\/span><\/p>\n<p><span style=\"font-size:16px\"><strong>Step#1:<\/strong> &nbsp;Create a user-define variable which gets the value of Query string. For example name the variable Page Query<\/span><\/p>\n<div style=\"width: 321px\" class=\"wp-caption alignnone\"><img decoding=\"async\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/491_image-asset.png\" alt=\" naming variable \"><p class=\"wp-caption-text\">naming variable<\/p><\/div>\n<p><span style=\"font-size:12.6667px\"><strong>Step#2: <\/strong>create a custom javascript variable name in for example newPagePath. Here is required code<\/span><\/p>\n<pre class=\"source-code\"><span class=\"cm-operator\">&lt;<\/span><span class=\"cm-variable\">script<\/span><span class=\"cm-operator\">&gt;<\/span>\n  \n<span class=\"cm-keyword\">function<\/span>() {\n      <span class=\"cm-keyword\">var<\/span> <span class=\"cm-def\">pageQuery<\/span> <span class=\"cm-operator\">=<\/span> {{<span class=\"cm-variable\">Page<\/span> <span class=\"cm-variable\">Query<\/span>}};\n      <span class=\"cm-keyword\">var<\/span> <span class=\"cm-variable\">pageURL<\/span> <span class=\"cm-operator\">=<\/span> {{<span class=\"cm-variable\">Page<\/span> <span class=\"cm-variable\">URL<\/span>}};\n      <span class=\"cm-keyword\">var<\/span> <span class=\"cm-variable\">pagePath<\/span> <span class=\"cm-operator\">=<\/span> {{<span class=\"cm-variable\">Page<\/span> <span class=\"cm-variable\">Path<\/span>}};\n\n      <span class=\"cm-comment\">\/\/ remove 'search' query parameter<\/span>\n      <span class=\"cm-keyword\">var<\/span> <span class=\"cm-variable\">queryResult<\/span> <span class=\"cm-operator\">=<\/span> <span class=\"cm-variable\">pageQuery<\/span>.<span class=\"cm-property\">replace<\/span>(<span class=\"cm-string-2\">\/&amp;search(\\=[^&amp;]*)?(?=&amp;|$)|^search(\\=[^&amp;]*)?(&amp;|$)\/<\/span>, <span class=\"cm-string\">''<\/span>);\n      <span class=\"cm-keyword\">if<\/span>(<span class=\"cm-variable\">pageURL<\/span>.<span class=\"cm-property\">indexOf<\/span>(<span class=\"cm-string\">'search=abc'<\/span>) <span class=\"cm-operator\">&lt;=<\/span> <span class=\"cm-operator\">-<\/span><span class=\"cm-number\">1<\/span> <span class=\"cm-operator\">&amp;&amp;<\/span> <span class=\"cm-variable\">queryResult<\/span>.<span class=\"cm-property\">length<\/span> <span class=\"cm-operator\">==<\/span> <span class=\"cm-number\">0<\/span>) {\n      <span class=\"cm-keyword\">return<\/span> <span class=\"cm-variable\">pagePath<\/span>;\n      } \n      \n      <span class=\"cm-comment\">\/\/ Add remaining query string to page path<\/span>\n      <span class=\"cm-keyword\">else<\/span> {\n      <span class=\"cm-keyword\">if<\/span>(<span class=\"cm-variable\">queryResult<\/span>.<span class=\"cm-property\">length<\/span> <span class=\"cm-operator\">&gt;<\/span> <span class=\"cm-number\">0<\/span>){\n      <span class=\"cm-keyword\">var<\/span> <span class=\"cm-variable\">newPath<\/span> <span class=\"cm-operator\">=<\/span> <span class=\"cm-variable\">pagePath<\/span> <span class=\"cm-operator\">+<\/span> <span class=\"cm-string\">\"?\"<\/span> <span class=\"cm-operator\">+<\/span> <span class=\"cm-variable\">queryResult<\/span>;\n      } \n        \n      <span class=\"cm-keyword\">else<\/span> {\n      <span class=\"cm-comment\">\/\/ If no query string is present return just page path<\/span>\n      <span class=\"cm-keyword\">var<\/span> <span class=\"cm-variable\">newPath<\/span> <span class=\"cm-operator\">=<\/span> <span class=\"cm-variable\">pagePath<\/span>;\n      }\n      <span class=\"cm-keyword\">return<\/span> <span class=\"cm-variable\">newPath<\/span>;\n      }\n  }\n\n  <span class=\"cm-operator\">&lt;<\/span><span class=\"cm-string-2\">\/script&gt;<\/span><\/pre>\n<p><span style=\"font-size:12.6667px\"><\/span><\/p>\n<p><span style=\"font-size:12.6667px\"><strong>Step#3:<\/strong> Implement the javascript variable as Field to set, page variable within all analytics tags<\/span><\/p>\n<div style=\"width: 728px\" class=\"wp-caption alignnone\"><img decoding=\"async\" src=\"https:\/\/marketlytics.com\/wp-content\/uploads\/2020\/03\/492_image-asset.png\" alt=\" field to set \"><p class=\"wp-caption-text\">field to set<\/p><\/div>\n<p><span style=\"font-size:12.6667px\">Make sure you have completed the steps carefully in order to get correct reports.<\/span><\/p>\n<div class=\"newsletter-form-wrapper newsletter-form-wrapper--layoutFloat newsletter-form-wrapper--alignCenter\">\n<form class=\"newsletter-form\" data-form-id=\"57fba2e120099e81e7254f1f\" autocomplete=\"on\" method=\"POST\" onsubmit=\"return (function (form) {\n  Y.use('squarespace-form-submit', 'node', function usingFormSubmit(Y) {\n    (new Y.Squarespace.FormSubmit(form)).submit({\n      formId: '57fba2e120099e81e7254f1f',\n      collectionId: '',\n      objectName: 'post-57d1155fd482e9cbbd0288a8'\n    });\n  });\n  return false;\n})(this);\"><\/p>\n<header class=\"newsletter-form-header\">\n<div class=\"newsletter-form-header-description\">\n<p><strong>Everything you need to know about Digital Analytics, delivered every month<\/strong><\/p>\n<\/div>\n<\/header>\n<div class=\"newsletter-form-body\">\n<div class=\"newsletter-form-fields-wrapper form-fields\">\n<div id=\"email-yui_3_17_2_1_1476107036223_50046\" class=\"newsletter-form-field-wrapper form-item field email required\">\n              <label class=\"newsletter-form-field-label title\" for=\"email-yui_3_17_2_1_1476107036223_50046-field\">Email Address<\/label><br \/>\n<input id=\"email-yui_3_17_2_1_1476107036223_50046-field\" class=\"newsletter-form-field-element field-element\" name=\"email\" x-autocompletetype=\"email\" type=\"text\" spellcheck=\"false\" placeholder=\"Email Address\"><\/div>\n<\/div>\n<div class=\"newsletter-form-button-wrapper submit-wrapper\">\n        <button class=\"newsletter-form-button sqs-system-button sqs-editable-button-layout sqs-editable-button-style sqs-editable-button-shape\" type=\"submit\" value=\"Subscribe\"><span class=\"newsletter-form-spinner sqs-spin light large\"><\/span><span class=\"newsletter-form-button-label\">Subscribe<\/span><span class=\"newsletter-form-button-icon\"><\/span><\/button><\/div>\n<\/div>\n<div class=\"newsletter-form-footnote\">\n<p>We respect your privacy.<\/p>\n<\/div>\n<div class=\"hidden form-submission-text\">\n<p>Please check your inbox to confirm the subscription. Thank you!<\/p>\n<\/div>\n<div class=\"hidden form-submission-html\" data-submission-html=\"\"><\/div>\n<\/form>\n<\/div>\n","protected":false},"excerpt":{"rendered":"<p>Are you looking for removing query parameters from urls in google tag manager? Here is a quick guide to avoid query parameters and get clean urls in reports.<\/p>\n","protected":false},"author":5,"featured_media":2225,"comment_status":"closed","ping_status":"open","sticky":false,"template":"","format":"standard","meta":{"content-type":"","footnotes":""},"categories":[2],"tags":[66],"acf":[],"aioseo_notices":[],"_links":{"self":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts\/1691"}],"collection":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts"}],"about":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/types\/post"}],"author":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/users\/5"}],"replies":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/comments?post=1691"}],"version-history":[{"count":0,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/posts\/1691\/revisions"}],"wp:featuredmedia":[{"embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/media\/2225"}],"wp:attachment":[{"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/media?parent=1691"}],"wp:term":[{"taxonomy":"category","embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/categories?post=1691"},{"taxonomy":"post_tag","embeddable":true,"href":"https:\/\/marketlytics.com\/wp-json\/wp\/v2\/tags?post=1691"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}